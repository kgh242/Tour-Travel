<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.travel.pack.mapper.PackMapper">

    <insert id="packAdd" parameterType="com.travel.pack.dto.PackDTO">
		INSERT INTO pack_info (
			company_id, 
			pack_info_title,
			pack_info_country, 
			pack_info_safe, 
			pack_info_air, 
			pack_info_start_date, 
			pack_info_end_date, 
			pack_info_course, 
			pack_info_person_number, 
			pack_info_closing_date, 
			pack_info_sale, 
			pack_info_apply_date)
		 VALUES (
		 	#{company_id}, 
		 	#{pack_info_title},
		 	#{pack_info_country}, 
		 	#{pack_info_safe}, 
		 	#{pack_info_air}, 
		 	#{pack_info_start_date}, 
		 	#{pack_info_end_date}, 
		 	#{pack_info_course}, 
		 	#{pack_info_person_number}, 
		 	#{pack_info_closing_date}, 
		 	#{pack_info_sale}, 
		 	now());
		 	<selectKey resultType="integer" keyProperty="pack_info_no" order="AFTER">
   				SELECT LAST_INSERT_ID()
			</selectKey>
		 	
    </insert>
    
    <insert id="packHotelAdd" parameterType="com.travel.pack.dto.PackHotelDTO">
    	INSERT INTO pack_hotel (
    		pack_info_no,
    		pack_hotel_start_date,
    		pack_hotel_end_date,
    		pack_hotel_day,
    		hotel_code,
    		pack_hotel_name)
    	VALUES (
    		#{pack_info_no},
    		#{pack_hotel_start_date},
    		#{pack_hotel_end_date},
    		'20180101',
    		'가상호텔코드쿼리수정',
    		'가상호텔이름쿼리수정'
    		)
    </insert>
    
    <insert id="packScheduleAdd" parameterType="com.travel.pack.dto.PackScheduleDTO">
    	INSERT INTO pack_schedule (
    		pack_info_no,
    		company_id,
    		pack_schedule_date,
    		pack_schedule_contents)
    	VALUES (
  			#{pack_info_no},
    		#{company_id},
    		#{pack_schedule_date},
    		#{pack_schedule_contents}
    		)
    </insert>

    <insert id="packLandmarkAdd" parameterType="com.travel.pack.dto.PackLandmarkDTO">
    	INSERT INTO pack_landmark (
    		pack_info_no,
    		company_id,
    		pack_landmark_code,
    		pack_tour_date,
    		pack_tour_contents)
    	VALUES (
  			#{pack_info_no},
    		#{company_id},
    		#{pack_landmark_code},
    		#{pack_tour_date},
    		#{pack_tour_contents}
    		)
    </insert>
    
    
    <insert id="packHotelImgAdd" parameterType="map">
    	INSERT INTO pack_hotel_img (
    		pack_info_no, 
    		pack_hotel_img_path, 
    		pack_hotel_img_true_name, 
    		pack_hotel_img_false_name, 
    		pack_hotel_img_ext, 
    		pack_hotel_img_size, 
    		pack_hotel_img_date)
    	VALUES (    		
    		#{pack_info_no}, 
    		#{imgDTO.imgPath}, 
    		#{imgDTO.imgTrueName}, 
    		#{imgDTO.imgFalseName}, 
    		#{imgDTO.imgExt}, 
    		#{imgDTO.imgSize}, 
    		now())
    </insert>
    
   	<insert id="packScheduleImgAdd" parameterType="map">
    	INSERT INTO pack_schedule_img (
    		pack_info_no, 
    		pack_schedule_img_path, 
    		pack_schedule_img_true_name, 
    		pack_schedule_img_false_name, 
    		pack_schedule_img_ext, 
    		pack_schedule_img_size, 
    		pack_schedule_img_date)
    	VALUES (    		
    		#{pack_info_no}, 
    		#{imgDTO.imgPath}, 
    		#{imgDTO.imgTrueName}, 
    		#{imgDTO.imgFalseName}, 
    		#{imgDTO.imgExt}, 
    		#{imgDTO.imgSize}, 
    		now())
    </insert>
    
    <insert id="packLandmarkImgAdd" parameterType="map">
    	INSERT INTO pack_landmark_img (
    		pack_info_no, 
    		pack_tour_img_path, 
    		pack_tour_img_true_name, 
    		pack_tour_img_false_name, 
    		pack_tour_img_ext, 
    		pack_tour_img_size, 
    		pack_tour_img_date)
    	VALUES (    		
    		#{pack_info_no}, 
    		#{imgDTO.imgPath}, 
    		#{imgDTO.imgTrueName}, 
    		#{imgDTO.imgFalseName}, 
    		#{imgDTO.imgExt}, 
    		#{imgDTO.imgSize}, 
    		now())
    </insert>
    


    <select id="packGetInfo" parameterType="int" resultType="com.travel.pack.dto.PackDTO">
    	SELECT * FROM pack_info WHERE pack_info_no = #{pack_info_no}
    </select>
    
    <select id="packList" resultType="com.travel.pack.dto.PackDTO">
    	SELECT * FROM pack_info
    </select>

</mapper>